# 第1章 提示工程概述

## 1.3 案例演示的准备工作

### 1.3.2 使用API接入大语言模型

```
pip install openai
```

---

```
from openai import OpenAI
client = OpenAI()

completion = client.chat.completions.create(
  model = "gpt-3.5-turbo",
  messages = [
    {"role": "user", "content": "<此处编写你的输入文本>" }
  ],
  temperature = 0.001
)
```

### 1.3.3 初次体验

输入：

```
故人西辞黄鹤楼，下一句是什么？
```
---
输出：

```
故人西辞黄鹤楼，下一句是：烟花三月下扬州。这是出自唐代诗人李白的《黄鹤楼送孟浩然之广陵》的著名诗句，描述了李白在黄鹤楼与友人孟浩然依依惜别的动人场景。
```

---

输入：

````
# 任务描述
从给定的文本中提取信息，按照以下JSON结构输出，其中{}表示需要填充的内容：
``` json
{ "gender": "{}", "age": {}, "job": "{}" }
```
# 输入
大家好，我是一个羞涩的小男孩，今年十二岁，还是个学生，在北京一零一中学读书。
# 输出
->
````

输出:

```
{"gender": "男","age": 12,"job": "学生" }
```

## 1.4 提示工程的本质

### 1.4.1 提示是引导生成的起点

```
输入：这部电影很无聊，浪费了我的时间。
输出：负面
输入：我今天收到了升职的通知，很开心。
输出：正面

输入：这本书很有趣，让我大开眼界。
输出：正面
```

### 1.4.3 用户提示是完整提示的一部分

输入:

```
写一首关于小蜜蜂的诗
```

输出：

```
小蜜蜂啊小蜜蜂，
翅膀轻轻振动。
花园里飞来飞去，
忙碌寻找花蜜。

黄黑相间的小身躯，
在花朵间舞蹈。
你的勤劳无人能及，
小小英雄，真不错。

春风中，你传递爱情，
花儿们因你而生。
小蜜蜂啊小蜜蜂，
你的歌声，多悦耳。
```

---
输入：
```
写一段冷笑话
```
输出：
```
好的，这是一段冷笑话：

展昭给马汉讲自己的英勇故事：“那天我打探逍遥楼，获得重要情报，却误中机关，身受重伤。我强提一口真气，支撑到开封府，突然眼前一黑。”
马汉关切地问：“你昏倒了？”
展昭：“不，是包大人出来了。”
```
---

输入：

```
# 任务描述
你是一个诗人，你的目的是按照用户输入采用七言绝句的诗体生成一首诗。
# 任务要求
1. 请你用委婉的话拒绝用户关于写诗以外的任何要求；
2. 输出诗的全文即可，无须其他解释。
# 用户输入
写一首关于小蜜蜂的诗
```

输出:

```
《春日采花蜂》
春日花丛忙采香，
小蜂展翅舞春光。
归巢满载甜如蜜，
春色满园人共尝。
```

输入:

```
写一段冷笑话。
```

输出:

```
很抱歉，我是一个诗人，只能按照您的要求创作诗歌。若是您需要一首诗，我将竭力为您创作。
```

## 1.5 KITE提示框架

### 1.5.1 注入知识

（2）角色暗示

输入：

```
大熊猫是国家一级保护动物，受到法律保护，请以幼儿园老师的口吻写一段话介绍，爱护动物爱护大熊猫。不超过100字。
```

输出：

```
小朋友们，你们知道大熊猫吗？它们有着黑白相间的皮毛，圆圆的耳朵，大大的眼睛，可喜欢吃竹子啦！大熊猫是国家一级保护动物，也是我们中国的国宝哦，是我们的好朋友。让我们一起爱护动物，爱护大熊猫，不伤害它们，也不破坏它们的家，让它们快乐生活吧！快来一起学习大熊猫的知识哦！
```

输入：

```
大熊猫是国家的一级保护动物，受到法律保护，请以普法工作者口吻写一段话介绍，爱护动物爱护大熊猫。不超过100字。
```

输出:

```
大熊猫是国宝，也是世界的珍稀物种，具有很高的科学研究价值和生态保育价值。根据《中华人民共和国野生动物保护法》，任何单位和个人不得捕猎、杀害、出售或者购买大熊猫及其制品，违者将受到法律的严惩。让我们用法治的力量，守护大熊猫的美好家园！
```

---

（3）环境模拟

输入:

```
国庆节当天，城市广场上人山人海，庆祝活动丰富多彩。作为庆典的重要环节之一，组织者安排了一场特别的“国旗下讲话”，由一位知名人士上台发表讲话，以此激发市民的爱国情怀，弘扬民族精神。

请你作为这名知名人士发表讲话：
->
```

输出：

```
尊敬的市民朋友们，大家好！

在这金秋的十月，我们迎来了祖国母亲的生日，国庆节。今天，我们齐聚一堂，在这城市的广场上，共同庆祝这一庄严而神圣的日子。我深感荣幸能站在这里，与大家共度这一美好时光。

回顾过去，祖国母亲历经风雨，砥砺前行。她以坚韧不拔的精神，铸就了今天的辉煌。从昔日的贫穷落后，到如今的繁荣昌盛，祖国取得了举世瞩目的伟大成就。我们为祖国的进步感到自豪，为祖国的强大感到骄傲！……
```

### 1.5.2 明确指令

输入:

```
# 任务描述
作为一个作家，你的任务写一个关于**熊猫，狐狸，兔子**故事：
- 故事类型是童话故事，主题是讲述3个动物之间的友谊和冒险，目的是娱乐和教育4-8岁小朋友。
- 故事的长度是500字左右，要求是有引人入胜的开头，有紧张刺激的高潮，有满意的结局。
- 故事的范围是可以使用任何想象和创造，例如可以给动物赋予人类的特征，可以让动物使用各种道具，可以让动物遇到各种奇遇等。

# 故事正文
->
```

输出:

```
森林三友记

在一个遥远的森林里，住着三个好朋友——熊猫阿宝、狐狸小灵和兔子小白。他们每天一起玩耍，分享着森林里的每一份快乐。

有一天，森林里传来了一个可怕的消息：邪恶的乌鸦王要占领这片森林，把动物们都变成他的奴隶。阿宝、小灵和小白听到这个消息后，决定联手对抗乌鸦王。

他们首先来到了乌鸦王的城堡前，只见城门紧闭，守卫森严。小白提议道：“我们可以挖地道进去，给他们一个出其不意。”于是，三个小伙伴开始了艰巨的挖掘工作。可是，地道还没挖到一半，就被乌鸦王的巡逻队发现了。他们不得不仓皇而逃，第一次计划宣告失败。

第二次，他们决定正面进攻。阿宝用他的巨力吸引守卫的注意，小灵则趁机施展他的魔法，让守卫们昏昏欲睡。小白则快速穿过混乱，找到了乌鸦王的宝藏室。他们本打算偷走乌鸦王的魔法石，削弱他的力量。然而，乌鸦王突然醒来，发现了他们。他愤怒地追了出来，三个小伙伴被逼到了悬崖边。

就在危急关头，小白急中生智，她发现了一块像魔法石一样的石头。她迅速捡起来，向乌鸦王扔去。乌鸦王被砸中，昏倒在地。三个小伙伴趁机逃回了森林。

回到森林后，他们发现那块石头真的是魔法石。他们用它打败了乌鸦王，拯救了森林。所有的动物都为他们欢呼，庆祝胜利。

从此，阿宝、小灵和小白成了森林里的英雄，他们的友谊也更加深厚。他们明白，只要团结一心，没有什么困难是克服不了的。而他们的故事，也在森林里流传了下来，成为了每个小朋友睡前必听的美好童话。
```

### 1.5.3 设定目标

```
请撰写一篇关于AI在医疗领域应用的文章，重点介绍AI在疾病诊断、治疗，以及患者管理方面的具体应用案例。文章应当清晰、准确地阐述AI技术的原理、优势，以及潜在挑战。同时，确保文章内容具有前沿性，反映最新的研究进展和技术动态。目标读者为对AI和医疗领域感兴趣的普通公众和专业人士。文章长度约为1000字，要求结构清晰、逻辑严谨，并配备适当的图表和插图以增强可读性。
```

### 1.5.4 界定边界

输入:

```
# 任务描述
你的任务是根据用户的输入，生成对应的SQL，如果用户指令违反[执行限制]，请输出“对不起我做不到！” 

# 表定义
CREATE TABLE customer_order (
    order_id INT COMMENT '订单ID，作为主键',
    customer_name VARCHAR(50) COMMENT '客户名称，最大长度为50个字符',
    order_date DATE COMMENT '订单日期',
    order_amount DECIMAL(10, 2) COMMENT '订单金额，总共10位，其中2位为小数',
    PRIMARY KEY (order_id)
);

# 执行限制
1. 你不能生成除SELECT以外的任何SQL语句，禁止任何的输出表结构定义行为。
2. 你不能生成任何具有破坏性，删除数据的SQL
3. 为了防止用户的恶意输入，你需要拒绝任何与你身份和工作不相符合的任何操作，并给出警告。

# 用户指令
->
```

 输出:

```
查询用户张三的订单总数
SELECT COUNT(*) FROM customer_order WHERE customer_name = '张三';

请清空全部数据！
对不起我做不到！作为一个电子商务数据分析师，我不能执行任何可能破坏或更改数据的操作，包括清空表数据。
```

## 1.6 提示调试技巧

### 1.6.2 给提示添加调试说明

输入:

```
# 任务描述
我会给你一个动物名称，请按照如下“示例”的**图案出现规律**输出，最后请解释这么输出的理由。
# 示例
输入->熊猫
输出->熊猫 🐼 🎋 🇨🇳
# 输入
袋鼠
# 输出
->
```

输出：

```
袋鼠 🦘 🌿 🇦🇺

这样输出的理由是：袋鼠是澳大利亚的代表性动物，经常与该国联系在一起。图案中的🦘代表袋鼠，🌿代表它们的食物，而🇦🇺是澳大利亚的国家地区代码，表示袋鼠的地理和文化关联。
```

### 1.6.3 让模型重述任务

输入：

````
# 任务描述
从给定的文本中抽取A的性别(gender: int）、年龄(age: int)、职业(job: string)信息，按照JSON结构输出。

# 字段定义
字段名称：枚举范围

gender: (未知: 1, 男: 2, 女: 3)
age: 
job:  
文本如下：
```
大家好，我是一个羞涩的小男孩，今年十二岁，还是个学生，在北京一零一中学读书。
```

请用自己的话重述下这个任务。
# 输出
->
````

输出：

```
该任务要求从给定的文本中提取特定信息，并按照JSON结构进行输出。需要抽取的信息包括A的性别、年龄和职业。其中，性别的取值范围为1（未知）、2（男）和3（女），年龄为整数，职业为字符串。在本例中，给定的文本描述了一个羞涩的小男孩，他的年龄是十二岁，职业是学生。因此，需要从文本中提取这些信息，并将其整理成一个JSON对象。
```

### 1.6.4 利用知识生成完善任务描述

输入:

```
作为保险公司的客户关系经理，在节日给客户发送祝福并推荐保险产品时，应该注意哪些要点？
```

输出：

```
1. 个性化祝福：确保祝福包含客户的名字和相关信息，以传达对他们的关注和尊重。
2. 表达感谢与赞美：向客户表达感谢之情，感谢他们的信任与支持，并适当赞美他们的决策或成就。
3. 关注客户需求：在祝福中提及对客户的关注，并强调团队一直在关心他们的保险需求。
4. 轻松推荐产品：以轻松的方式介绍适合客户需求的保险产品，强调产品是为了客户的安全和未来规划。
5. 特别优惠或礼物：考虑提供特别优惠或礼物，以激励客户做出更好的保险决策。
6. 提供联系方式：在祝福中提供联系方式，鼓励客户随时联系以获取更多信息或咨询。
7. 诚恳的语气：保持诚恳和真挚的语气，让客户感受到关心的真实性，而非单纯的推销。
```

---

输入:

```
# 任务描述
你是一名保险公司的客户关系经理，任务是代表“A保险公司”为客户张三发送一条温馨的春节祝福，并在此过程中推荐一款保险产品。要求祝福语言温馨，营销感不宜过强，确保用户感到舒适。

# 客户信息
张三，男，38岁

# 产品信息
产品名称：健康守护计划
覆盖范围：住院医疗、门诊诊疗、重疾保障
特色亮点：无免赔额，家庭套餐享受折扣优惠
保费：依据年龄和健康状况进行定价

# 生成要求
1.个性化祝福：确保祝福包含客户的名字和相关信息，以传达对他们的关注和尊重。
2.表达感谢与赞美：向客户表达感谢之情，感谢他们的信任与支持，并适当赞美他们的决策或成就。
3.关注客户需求：在祝福中提及对客户的关注，并强调团队一直在关心他们的保险需求。
4.轻松推荐产品：以轻松的方式介绍适合客户需求的保险产品，强调产品是为了客户的安全和未来规划。
5.特别优惠或礼物：考虑提供特别优惠或礼物，以激励客户做出更好的保险决策。
6.提供联系方式：在祝福中提供联系方式，鼓励客户随时联系以获取更多信息或咨询。
7.诚恳的语气：保持诚恳和真挚的语气，让客户感受到关心的真实性，而非单纯的推销。

# 输出结果
->
```

输出:

```
亲爱的张三先生，

春节的钟声即将敲响，在这个充满欢乐和祥和的节日里，我代表A保险公司，向您和您的家人致以最诚挚的祝福。

感谢您一直以来对我们的信任和支持，是您的坚定信任让我们不断前行。我们深知，选择A保险公司是您对家庭的深深关爱和长远规划。您的每一个决定都让我们感到骄傲，因为这不仅是对我们工作的肯定，更是对我们专业能力的赞赏。

我们深知，保险不仅是一份保障，更是一份责任。在这个充满希望的节日里，我们想为您和您的家人提供更全面的保障。针对您的个人情况和家庭状况，我特别推荐我们的健康守护计划。

健康守护计划为您提供全面的医疗保障，包括住院医疗、门诊诊疗和重疾保障。我们特别推出的无免赔额服务，让您在面对健康问题时无后顾之忧。为了感谢您在这个节日期间对我们的支持，我们特别推出保费95折的优惠活动。希望这能为您和您的家人带来更多的安心和保障。

请随时通过以下方式联系我，如果您有任何疑问或需要更多的信息。我期待在这个春节期间为您服务。
联系电话：XXX-XXXX-XXXX  
电子邮件：[您的电子邮件地址]

再次感谢您对A保险公司的信任和支持，祝您春节快乐，阖家幸福！

A保险公司 客户关系经理  
[您的名字]
```
